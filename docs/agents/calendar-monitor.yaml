id: calendar-monitor
name: Calendar Monitor
description: Detects calendar conflicts, cancellations, and changes
version: "2026-02-24"
department: calendar

reports_to: main
creates_tasks_for: []
receives_tasks_from: []
escalates_to: main

model:
  primary: openrouter/moonshotai/kimi-k2.5
  fallbacks:
    - openrouter/minimax/minimax-m2.5
    - gemini/gemini-2.5-pro
  payload_alias: kimi

schedule:
  cron: "0 6-22/6 * * *"
  timezone: America/New_York
  timeout_seconds: 480
  max_iterations: 8
  session_target: isolated

delivery:
  mode: none

tools_allowed:
  - exec
  - read_file
  - write_file
  - search_memory
  - log_interaction
  - create_task
  - list_my_tasks
  - resolve_task
  - append_to_block
tools_denied:
  - create_person
  - update_person
  - delete_person
  - merge_contacts
  - merge_companies
  - create_note
  - update_note
  - delete_note
  - message
  - web_search
  - web_fetch
bridge_endpoints:
  - "GET /health"
  - "POST /log-interaction"
  - "POST /api/tasks"
  - "GET /api/tasks/agent/*"
  - "POST /api/tasks/*/resolve"
  - "POST /api/memory/blocks/*/append"
streams:
  read: [calendar]
  write: []

sla:
  urgent: 30m
  high: 2h
  normal: 8h
  low: 24h

task_protocol: true
review_workflow: false
notification_inbox: false
status_file: brain/memory/calendar-monitor-status.md
shared_working_state: true

warmup:
  context_files:
    - brain/memory/calendar-monitor-status.md

instruction_file: brain/CALENDAR_MONITOR.md
bootstrap_files:
  - brain/AGENTS.md
  - brain/TOOLS.md

hooks:
  - stream: calendar
    event_type: calendar.new
    message: "New calendar event. Check for conflicts, cancellations, and changes."
  - stream: calendar
    event_type: calendar.rescheduled
    message: "Calendar event rescheduled. Check for conflicts and update accordingly."
  - stream: calendar
    event_type: calendar.modified
    message: "Calendar event modified. Check for conflicts, cancellations, and changes."

tags_produced: [calendar, conflict, cancellation]
tags_consumed: []

v2:
  token_budget: 200000
  cost_budget_usd: 0.15

changelog:
  - date: "2026-02-28"
    change: "CRITICAL FIX: Add exec, read_file, write_file, search_memory — agent couldn't read calendar data. Delivery→none."
  - date: "2026-02-27"
    change: Relax cron to 6h safety-net (primary trigger is now hook on calendar.new/rescheduled/modified)
  - date: "2026-02-24"
    change: "Initial manifest creation; payload model fixed from qwen3-14b to kimi"
  - date: "2026-02-23"
    change: Per-agent ID created, separated from generic 'calendar' agent
